### 在访问对象成员时启用安全策略
#### Ensuring Safety In Member Access

由于表达式一般会被嵌入到 HTML 中，而且嵌入的内容很可能会加入用户生成内容（user-generated content），也就是说，用户有可能通过生成特定表达式的方法来达到在程序中执行任意代码的效果，因此防止注入攻击是我们的重中之重。对此产生的防护措施主要基于一个原理，我们可以把所有表达式的上下文严格限制在 Scope 对象以内：除了字面量，我们只能访问添加在 scope 对象上的数据（或者 locals 上的数据）。存在安全隐患的对象，比如 `window`，我们会直接禁止访问。

在我们当前已经实现的代码中有几种方法可以解决这个问题：尤其是，在本章中，我们已经看到 JavaScript 的 `Function` 构造器是如何接收一个字符串，然后把这个字符串作为一个新函数的源代码。我们会使用这个新函数来生成表达式函数。事实证明，如果我们不采取措施来防止它，同样的 Function 构造函数可以让表达式运行任意的代码。



