## 如何阅读本书

在本书的课程中，我们会逐步实现一个 AngularJS 框架。我们会从零开始，然后在各个章节中逐渐加入各种新特性。

![](/assets/structure_of_angularjs.png)

在“第一部分”，我们首先会实现 Angular 作用域提供的脏值检测和 事件传播两个特性。我们将逐渐熟悉`$watch`、`$watchCollection`、`$digest`、`$apply`、`$evalAsync`、`$emit`、`$broadcast`等方法的内部运行原理。

在“第二部分”，我们会在之前的基础上增加对_表达式_（expressions）的支持，表达式就是放在花括号中的字符串，比如 `{{curly braces}}`，有时也会与 `$watch` 结合使用。表达式看似简单，但却需要我们对包含语法分析（parsing）、词法分析（lexing）和抽象语法树（abstract syntax tree）的编程语言世界展开深入而有趣的探索。这部分的内容还包含_过滤器_（filter），这是一个集成在 Angular 表达式的特性。

在“第三部分”。我们会深入了解依赖注入。在这里，我们会接触到 Angular 中的 _provider_、_service_ 和 _factory_ 是如何实现的，还有 Angular _module_ （模块）是如何运作的。我们也会把第一部分和第二部分的代码都重构为可以使用依赖注入系统进行注入的形式，这样我们就能得到一个完整的框架。

在“第四部分”，我们会实现 Angular 几个工具，这些工具对每个 Angular 应用来说都是非常重要的：我们会在`$q`服务中实现 _promise_ 功能，而在`$http` 服务中实现 HTTP 客户端。实现这些工具，不仅能让应用开发者理解这些工具的内在原理，同时也实现了构建指令系统的一个关键要素。

在最后一部分，也就是“第五部分”，终于到“重头戏”——指令系统出场。这是本书最为高级的部分，因为该部分实现了 AngularJS 中功能最丰富也最为复杂的子系统——指令编译器。我们会了解 DOM 的_编译_（compilation）和_链接_(linking)、`Attributes`对象、独立作用域、控制器、transclusion（插槽指令）和 interpolation（插值表达式）。最后，我们会把所有东西都打包到一起，看看 Angular 实际上是怎么启动（bootstraps）和运行（runs）一个应用的。

虽然 Angular 中的某些功能在很大程度上是独立的，但你编写的大部分代表都是建立在前几章实现的基础上的。这也是为什么我建议你按照章节顺序阅读，这会让你收获更多。

本书讲述风格简单：每个特性，我们都会通过讨论这个功能是什么和为什么需要它来进行介绍。然后我们会利用测试驱动（test-driven）的开发方式来一步步实现这个功能：简而言之，先写一个尚未能通过的测试，然后通过编写代码让这个测试通过。最终，我们不仅会产出一个框架代码，还会产出一个测试套件（test suite）。

我强烈建议你不要仅仅满足于阅读代码，最好把代码也敲出来，在阅读本书的同时写出自己的 Angular 框架。另外，要验证自己是否掌握了一个概念，最好从不同的方向入手：比如自己写一些额外的测试用例，试着找到方法让程序出现异常。或者也可以按照自己的方式重构代码，同时保证通过所有的测试用例。

如果你只对框架中的某个部分感兴趣，也可以直接翻到你感兴趣的章节阅读。有时，你只是想回头参考一下 Angular 框架，（通过本书）你也可以很轻松地将框架中的一些优秀的代码移植到自己的应用或框架。