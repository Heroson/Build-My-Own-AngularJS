## 如何阅读本书

在本书的课程中，我们会逐步实现一个 AngularJS 框架。我们会从零开始，然后在各个章节中逐渐加入各种新特性。

![](/assets/structure_of_angularjs.png)

在“第一部分”，我们首先会实现 Angular 作用域提供的脏值检测和 事件传播两个特性。我们将逐渐熟悉`$watch`、`$watchCollection`、`$digest`、`$apply`、`$evalAsync`、`$emit`、`$broadcast`等方法的内部运行原理。

在“第二部分”，我们会在之前的基础上增加对_表达式_（expressions）的支持，表达式就是放在花括号中的字符串，比如 `{{curly braces}}`，有时也会与 `$watch` 结合使用。表达式看似简单，但却需要我们对包含语法分析（parsing）、词法分析（lexing）和抽象语法树（abstract syntax tree）的编程语言世界展开深入而有趣的探索。这部分的内容还包含_过滤器_（filter），这是一个集成在 Angular 表达式的特性。

在“第三部分”。我们会深入了解依赖注入。在这里，我们会接触到 Angular 中的 _provider_、_service_ 和 _factory_ 是如何实现的，还有 Angular _module_ （模块）是如何运作的。我们也会把第一部分和第二部分的代码都重构为可以使用依赖注入系统进行注入的形式，这样我们就能得到一个完整的框架。

在“第四部分”，我们会实现 Angular 几个工具，这些工具对每个 Angular 应用来说都是非常重要的：我们会在`$q`服务中实现 _promise_ 功能，而在`$http` 服务中实现 HTTP 客户端。实现这些工具，不仅能让应用开发者理解这些工具的内在原理，同时也实现了构建指令系统的一个关键要素。

在最后一部分，也就是“第五部分”，我们最终会深入了解指令系统。这是本书最为高级的部分，因为该部分实现了 AngularJS 最丰富而复杂的功能（子系统）——指令编译器。我们会了解 DOM 的编译和链接、`Attributes`对象、独立作用域、控制器、transclusion 和 interpolation。在最后一章中，我们会把所有东西都打包到一起，看看 Angular 实际上是怎么启动和运行一个应用的。

虽然 Angular 中的某些功能在很大程度上是独立的，但大部分我们要写的功能都会在前面章节的基础上构建出来。这就是为什么顺着章节顺序的阅读能够帮助我们充分利用本书。

本书讲述风格简单：我们会通过“是什么”和”为什么“来对功能进行介绍。然后我们会开始利用测试驱动的开发方式来一步步实现这个功能，也就是先写一个尚未能通过的测试，然后通过编写代码让这个测试通过。最终，我们不仅会产出框架的代码，还会产出一个测试套件。

作者强烈建议你们不要只是阅读代码，最好亲自把代码敲出来，在阅读本书的同时写出自己的 Angular 框架。要验证自己是否掌握了一个概念，最好从不同的方向入手，自己写一些额外的测试用例。试着故意用其他方法使程序失效。按照自己的方式重构代码，同时也要保持测试用例能透过。

如果你只对框架中的某个部分感兴趣，可以自己挑出来看。或者你只是想参考一下 Angular 框架，将框架中的一些优秀的代码移植到自己的应用或框架，应该也不是什么难事。